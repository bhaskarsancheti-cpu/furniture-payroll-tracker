
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance &amp; Payroll Tracker - Furniture Workshop</title>
    <style>
        :root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08);
  --color-bg-2: rgba(245, 158, 11, 0.08);
  --color-bg-3: rgba(34, 197, 94, 0.08);
  --color-bg-4: rgba(239, 68, 68, 0.08);
  --color-bg-5: rgba(147, 51, 234, 0.08);
  --color-bg-6: rgba(249, 115, 22, 0.08);
  --color-bg-7: rgba(236, 72, 153, 0.08);
  --color-bg-8: rgba(6, 182, 212, 0.08);

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;

  /* Spacing */
  --space-4: 4px;
  --space-8: 8px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);

  /* Custom colors for attendance */
  --color-present: #10b981;
  --color-absent: #ef4444;
  --color-leave: #f59e0b;
  --color-overtime: #3b82f6;
}

@media (prefers-color-scheme: dark) {
  :root {
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  }
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-family-base);
    background-color: var(--color-background);
    color: var(--color-text);
    line-height: var(--line-height-normal);
    font-size: var(--font-size-base);
}

.app-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: var(--space-24);
}

.header {
    margin-bottom: var(--space-32);
}

.header h1 {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    margin-bottom: var(--space-8);
}

.month-selector {
    display: flex;
    align-items: center;
    gap: var(--space-16);
    margin-top: var(--space-16);
}

.month-selector label {
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
}

.month-selector input {
    padding: var(--space-8) var(--space-12);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-base);
    background-color: var(--color-surface);
    color: var(--color-text);
    font-size: var(--font-size-base);
}

.tabs {
    display: flex;
    gap: var(--space-8);
    border-bottom: 1px solid var(--color-border);
    margin-bottom: var(--space-24);
}

.tab {
    padding: var(--space-12) var(--space-20);
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    color: var(--color-text-secondary);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.2s;
}

.tab:hover {
    color: var(--color-text);
}

.tab.active {
    color: var(--color-primary);
    border-bottom-color: var(--color-primary);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-20);
    margin-bottom: var(--space-32);
}

.stat-card {
    background: var(--color-surface);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: var(--space-20);
    box-shadow: var(--shadow-sm);
}

.stat-card h3 {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-12);
}

.stat-value {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    margin-bottom: var(--space-4);
}

.stat-label {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
}

.employee-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--space-20);
    margin-bottom: var(--space-32);
}

.employee-card {
    background: var(--color-surface);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: var(--space-20);
    box-shadow: var(--shadow-sm);
    cursor: pointer;
    transition: all 0.2s;
}

.employee-card:hover {
    box-shadow: var(--shadow-md);
    border-color: var(--color-primary);
}

.employee-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: var(--space-16);
}

.employee-name {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
}

.employee-role {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin-top: var(--space-4);
}

.employee-stats {
    display: flex;
    flex-direction: column;
    gap: var(--space-12);
}

.stat-row {
    display: flex;
    justify-content: space-between;
    font-size: var(--font-size-sm);
}

.stat-row-label {
    color: var(--color-text-secondary);
}

.stat-row-value {
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
}

.btn {
    padding: var(--space-8) var(--space-16);
    border: none;
    border-radius: var(--radius-base);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.2s;
}

.btn-primary {
    background: var(--color-primary);
    color: var(--color-btn-primary-text);
}

.btn-primary:hover {
    background: var(--color-primary-hover);
}

.btn-secondary {
    background: var(--color-secondary);
    color: var(--color-text);
}

.btn-secondary:hover {
    background: var(--color-secondary-hover);
}

.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    align-items: center;
    justify-content: center;
}

.modal.active {
    display: flex;
}

.modal-content {
    background: var(--color-surface);
    border-radius: var(--radius-lg);
    padding: var(--space-32);
    max-width: 600px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-24);
}

.modal-header h2 {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
}

.close-btn {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--color-text-secondary);
    padding: var(--space-4);
}

.close-btn:hover {
    color: var(--color-text);
}

.form-group {
    margin-bottom: var(--space-20);
}

.form-label {
    display: block;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
    margin-bottom: var(--space-8);
}

.form-control {
    width: 100%;
    padding: var(--space-8) var(--space-12);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-base);
    background-color: var(--color-surface);
    color: var(--color-text);
    font-size: var(--font-size-base);
}

.form-control:focus {
    outline: 2px solid var(--color-primary);
    border-color: var(--color-primary);
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-16);
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: var(--space-4);
    margin-top: var(--space-16);
}

.calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.2s;
}

.calendar-day-header {
    font-size: var(--font-size-xs);
    color: var(--color-text-secondary);
    font-weight: var(--font-weight-bold);
    text-align: center;
    padding: var(--space-8);
}

.calendar-day.empty {
    cursor: default;
}

.calendar-day.present {
    background: var(--color-present);
    color: white;
}

.calendar-day.absent {
    background: var(--color-absent);
    color: white;
}

.calendar-day.leave {
    background: var(--color-leave);
    color: white;
}

.calendar-day.overtime {
    background: var(--color-overtime);
    color: white;
}

.calendar-day.default {
    background: var(--color-bg-1);
    color: var(--color-text);
}

.calendar-day.weekend {
    background: var(--color-bg-4);
    color: var(--color-text-secondary);
}

.attendance-list {
    margin-top: var(--space-24);
}

.attendance-item {
    background: var(--color-surface);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-base);
    padding: var(--space-16);
    margin-bottom: var(--space-12);
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: var(--space-16);
    align-items: center;
}

.attendance-date {
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
}

.attendance-details {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.attendance-time {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
}

.status-badge {
    display: inline-block;
    padding: var(--space-4) var(--space-12);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
}

.status-present {
    background: var(--color-present);
    color: white;
}

.status-absent {
    background: var(--color-absent);
    color: white;
}

.status-leave {
    background: var(--color-leave);
    color: white;
}

.status-overtime {
    background: var(--color-overtime);
    color: white;
}

.payroll-summary {
    background: var(--color-bg-3);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: var(--space-24);
    margin-top: var(--space-24);
}

.payroll-summary h3 {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-20);
}

.payroll-row {
    display: flex;
    justify-content: space-between;
    padding: var(--space-12) 0;
    border-bottom: 1px solid var(--color-card-border-inner);
}

.payroll-row:last-child {
    border-bottom: none;
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-lg);
    padding-top: var(--space-16);
}

.table-container {
    overflow-x: auto;
    margin-top: var(--space-24);
}

table {
    width: 100%;
    border-collapse: collapse;
    background: var(--color-surface);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

th {
    background: var(--color-bg-1);
    padding: var(--space-12) var(--space-16);
    text-align: left;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
}

td {
    padding: var(--space-12) var(--space-16);
    border-bottom: 1px solid var(--color-card-border-inner);
    font-size: var(--font-size-sm);
}

tr:last-child td {
    border-bottom: none;
}

tr:hover {
    background: var(--color-bg-1);
}

.back-btn {
    display: inline-flex;
    align-items: center;
    gap: var(--space-8);
    margin-bottom: var(--space-20);
    color: var(--color-primary);
    cursor: pointer;
    font-weight: var(--font-weight-medium);
}

.back-btn:hover {
    color: var(--color-primary-hover);
}

.employee-detail-header {
    background: var(--color-bg-2);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: var(--space-24);
    margin-bottom: var(--space-24);
}

.schedule-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-16);
    margin-top: var(--space-16);
}

.schedule-day {
    font-size: var(--font-size-sm);
}

.schedule-day strong {
    color: var(--color-text);
}

.action-buttons {
    display: flex;
    gap: var(--space-12);
    margin-top: var(--space-24);
}

.daily-labor-form {
    background: var(--color-surface);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: var(--space-24);
    margin-bottom: var(--space-24);
}

.info-text {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin-top: var(--space-4);
}

.computed-value {
    display: inline-block;
    background: var(--color-bg-5);
    padding: var(--space-4) var(--space-12);
    border-radius: var(--radius-sm);
    font-weight: var(--font-weight-medium);
    margin-top: var(--space-8);
}

.action-icons {
    display: flex;
    gap: var(--space-8);
    align-items: center;
}

.icon-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: var(--space-8);
    border-radius: var(--radius-sm);
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.icon-btn:hover {
    background: var(--color-secondary);
}

.icon-btn.edit {
    color: var(--color-primary);
}

.icon-btn.edit:hover {
    background: var(--color-bg-1);
}

.icon-btn.delete {
    color: var(--color-error);
}

.icon-btn.delete:hover {
    background: var(--color-bg-4);
}

.status-editable {
    cursor: pointer;
    padding: var(--space-6) var(--space-12);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    display: inline-flex;
    align-items: center;
    gap: var(--space-4);
    transition: all 0.2s;
}

.status-editable:hover {
    opacity: 0.8;
    box-shadow: 0 0 0 2px var(--color-border);
}

.status-dropdown {
    position: relative;
    display: inline-block;
}

.status-menu {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: var(--space-4);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-base);
    box-shadow: var(--shadow-md);
    z-index: 100;
    min-width: 150px;
}

.status-option {
    padding: var(--space-8) var(--space-12);
    cursor: pointer;
    transition: background 0.2s;
    font-size: var(--font-size-sm);
}

.status-option:hover {
    background: var(--color-secondary);
}

.toast {
    position: fixed;
    bottom: var(--space-24);
    right: var(--space-24);
    background: var(--color-success);
    color: white;
    padding: var(--space-16) var(--space-24);
    border-radius: var(--radius-base);
    box-shadow: var(--shadow-lg);
    font-weight: var(--font-weight-medium);
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.3s;
    z-index: 2000;
    pointer-events: none;
}

.toast.show {
    opacity: 1;
    transform: translateY(0);
}

.modified-badge {
    display: inline-block;
    font-size: var(--font-size-xs);
    color: var(--color-text-secondary);
    margin-left: var(--space-8);
    font-style: italic;
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .employee-cards {
        grid-template-columns: 1fr;
    }
    
    .tabs {
        overflow-x: auto;
    }
    
    .toast {
        right: var(--space-16);
        left: var(--space-16);
        bottom: var(--space-16);
    }
}
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>Attendance &amp; Payroll Tracker</h1>
            <div class="month-selector">
                <label for="monthYear">Select Month:</label>
                <input type="month" id="monthYear" value="2025-11">
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="dashboard">Dashboard</button>
            <button class="tab" data-tab="employees">Employees</button>
            <button class="tab" data-tab="employee-management">Employee Management</button>
            <button class="tab" data-tab="daily-labor">Daily Labor</button>
            <button class="tab" data-tab="advances">Advances</button>
            <button class="tab" data-tab="summary">Monthly Summary</button>
            <button class="tab" data-tab="export">Export/Backup</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Monthly Payroll</h3>
                    <div class="stat-value" id="totalPayroll">₹0</div>
                    <div class="stat-label">For selected month</div>
                </div>
                <div class="stat-card">
                    <h3>Attendance Rate</h3>
                    <div class="stat-value" id="attendanceRate">0%</div>
                    <div class="stat-label">Overall presence</div>
                </div>
                <div class="stat-card">
                    <h3>Total Hours Worked</h3>
                    <div class="stat-value" id="totalHours">0</div>
                    <div class="stat-label">All employees combined</div>
                </div>
                <div class="stat-card">
                    <h3>Active Employees</h3>
                    <div class="stat-value" id="activeEmployees">3</div>
                    <div class="stat-label">Salaried workers</div>
                </div>
            </div>

            <h2 style="margin-bottom: var(--space-20); font-size: var(--font-size-2xl);">Employee Overview</h2>
            <div class="employee-cards" id="employeeCards"></div>
        </div>

        <!-- Employees Tab -->
        <div id="employees" class="tab-content">
            <div id="employeesList">
                <h2 style="margin-bottom: var(--space-20); font-size: var(--font-size-2xl);">Select an Employee</h2>
                <div class="employee-cards" id="employeeSelectCards"></div>
            </div>
            
            <div id="employeeDetail" style="display: none;">
                <div class="back-btn" onclick="showEmployeesList()">
                    <span>←</span> Back to Employees
                </div>
                <div class="employee-detail-header" id="employeeDetailHeader"></div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="openAttendanceModal()">+ Add Attendance Entry</button>
                </div>
                
                <h3 style="margin: var(--space-24) 0 var(--space-16) 0; font-size: var(--font-size-xl);">Monthly Calendar</h3>
                <div class="calendar-grid" id="employeeCalendar"></div>
                
                <h3 style="margin: var(--space-24) 0 var(--space-16) 0; font-size: var(--font-size-xl);">Attendance Records</h3>
                <div class="attendance-list" id="attendanceRecords"></div>
                
                <div class="payroll-summary" id="employeePayrollSummary"></div>
            </div>
        </div>

        <!-- Advances Tab -->
        <div id="advances" class="tab-content">
            <h2 style="margin-bottom: var(--space-20); font-size: var(--font-size-2xl);">Employee Advances</h2>
            
            <div class="stats-grid" style="margin-bottom: var(--space-32);">
                <div class="stat-card">
                    <h3>Total Pending Advances</h3>
                    <div class="stat-value" id="totalPendingAdvances">₹0</div>
                    <div class="stat-label">Across all employees</div>
                </div>
                <div class="stat-card">
                    <h3>Employees with Advances</h3>
                    <div class="stat-value" id="employeesWithAdvances">0</div>
                    <div class="stat-label">Active advances</div>
                </div>
                <div class="stat-card">
                    <h3>Oldest Pending Advance</h3>
                    <div class="stat-value" id="oldestAdvance">-</div>
                    <div class="stat-label">Days pending</div>
                </div>
                <div class="stat-card">
                    <h3>Settled This Month</h3>
                    <div class="stat-value" id="settledThisMonth">₹0</div>
                    <div class="stat-label">Total recovered</div>
                </div>
            </div>
            
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-24);">
                <div>
                    <label class="form-label" style="display: inline-block; margin-right: var(--space-12);">Filter by:</label>
                    <select id="advanceFilterEmployee" class="form-control" style="display: inline-block; width: 200px; margin-right: var(--space-12);" onchange="renderAdvances()">
                        <option value="">All Employees</option>
                    </select>
                    <select id="advanceFilterStatus" class="form-control" style="display: inline-block; width: 150px;" onchange="renderAdvances()">
                        <option value="">All Status</option>
                        <option value="Pending">Pending</option>
                        <option value="Partial">Partial</option>
                        <option value="Settled">Settled</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="openAddAdvanceModal()">+ Add Advance</button>
            </div>
            
            <div class="table-container">
                <table id="advancesTable">
                    <thead>
                        <tr>
                            <th>Date Given</th>
                            <th>Employee</th>
                            <th>Amount</th>
                            <th>Reason</th>
                            <th>Status</th>
                            <th>Deducted</th>
                            <th>Balance</th>
                            <th>Days Pending</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="advancesTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Daily Labor Tab -->
        <div id="daily-labor" class="tab-content">
            <h2 style="margin-bottom: var(--space-20); font-size: var(--font-size-2xl);">Daily Wage Laborers</h2>
            
            <div class="daily-labor-form">
                <h3 style="margin-bottom: var(--space-16); font-size: var(--font-size-lg);">Add Daily Labor Entry</h3>
                <form id="dailyLaborForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="laborDate">Date</label>
                            <input type="date" id="laborDate" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="laborName">Laborer Name</label>
                            <input type="text" id="laborName" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="laborWage">Daily Wage (₹)</label>
                            <input type="number" id="laborWage" class="form-control" min="500" max="1000" value="750" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="laborHours">Hours Worked</label>
                            <input type="number" id="laborHours" class="form-control" min="1" max="12" value="8" step="0.5" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="laborNotes">Notes (Optional)</label>
                        <input type="text" id="laborNotes" class="form-control">
                    </div>
                    <button type="submit" class="btn btn-primary">Add Entry</button>
                </form>
            </div>
            
            <div class="stat-card" style="margin-bottom: var(--space-24);">
                <h3>Total Daily Labor Cost</h3>
                <div class="stat-value" id="totalLaborCost">₹0</div>
                <div class="stat-label">For selected month</div>
            </div>
            
            <h3 style="margin-bottom: var(--space-16); font-size: var(--font-size-lg);">Daily Labor Records</h3>
            <div class="table-container">
                <table id="dailyLaborTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Name</th>
                            <th>Wage</th>
                            <th>Hours</th>
                            <th>Total</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody id="dailyLaborTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Employee Management Tab -->
        <div id="employee-management" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-24);">
                <h2 style="font-size: var(--font-size-2xl); margin: 0;">Employee Management</h2>
                <button class="btn btn-primary" onclick="openAddEmployeeModal()">+ Add Employee</button>
            </div>
            
            <div class="stats-grid" style="margin-bottom: var(--space-32);">
                <div class="stat-card">
                    <h3>Active Employees</h3>
                    <div class="stat-value" id="mgmtActiveEmployees">0</div>
                    <div class="stat-label">Currently working</div>
                </div>
                <div class="stat-card">
                    <h3>Total Monthly Payroll</h3>
                    <div class="stat-value" id="mgmtTotalPayroll">₹0</div>
                    <div class="stat-label">Active employees only</div>
                </div>
                <div class="stat-card">
                    <h3>Inactive Employees</h3>
                    <div class="stat-value" id="mgmtInactiveEmployees">0</div>
                    <div class="stat-label">Deactivated</div>
                </div>
                <div class="stat-card">
                    <h3>Average Salary</h3>
                    <div class="stat-value" id="mgmtAvgSalary">₹0</div>
                    <div class="stat-label">Per employee</div>
                </div>
            </div>
            
            <div class="table-container">
                <table id="employeeManagementTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Role</th>
                            <th>Current Salary</th>
                            <th>Hire Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="employeeManagementTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Summary Tab -->
        <div id="summary" class="tab-content">
            <h2 style="margin-bottom: var(--space-20); font-size: var(--font-size-2xl);">Monthly Payroll Summary</h2>
            
            <div class="table-container">
                <table id="summaryTable">
                    <thead>
                        <tr>
                            <th>Employee</th>
                            <th>Role</th>
                            <th>Expected Hours</th>
                            <th>Actual Hours</th>
                            <th>Base Salary</th>
                            <th>Deductions</th>
                            <th>Overtime Pay</th>
                            <th>Advance Deduction</th>
                            <th>Final Pay</th>
                        </tr>
                    </thead>
                    <tbody id="summaryTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Export/Backup Tab -->
    <div id="export" class="tab-content">
        <h2 style="margin-bottom: var(--space-20); font-size: var(--font-size-2xl);">Export &amp; Backup Data</h2>
        <div class="stats-grid" style="margin-bottom: var(--space-32);">
            <div class="stat-card">
                <h3>Download Attendance Log (CSV)</h3>
                <form id="exportAttendanceForm" style="margin-bottom: 12px;">
                    <label for="exportAttendanceEmployee" class="form-label" style="font-size: var(--font-size-sm); margin-bottom: 4px;">Employee</label>
                    <select id="exportAttendanceEmployee" class="form-control" style="margin-bottom: 12px; font-size: var(--font-size-sm); padding: 6px 10px;">
                        <option value="">All Employees</option>
                    </select>
                    <label for="exportAttendanceStatus" class="form-label" style="font-size: var(--font-size-sm); margin-bottom: 4px;">Status</label>
                    <select id="exportAttendanceStatus" class="form-control" style="margin-bottom: 12px; font-size: var(--font-size-sm); padding: 6px 10px;">
                        <option value="">All</option>
                        <option value="Present">Present</option>
                        <option value="Absent">Absent</option>
                        <option value="Leave">Leave</option>
                        <option value="Half-day">Half-day</option>
                    </select>
                    <label class="form-label" style="font-size: var(--font-size-sm); margin-bottom: 4px;">Date Range</label>
                    <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 12px;">
                        <input type="date" id="exportAttendanceFrom" class="form-control" style="flex: 1; font-size: var(--font-size-sm); padding: 6px 10px;">
                        <span style="color: var(--color-text-secondary);">to</span>
                        <input type="date" id="exportAttendanceTo" class="form-control" style="flex: 1; font-size: var(--font-size-sm); padding: 6px 10px;">
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 4px;">Download CSV</button>
                </form>
                <div class="info-text" id="attendanceExportInfo" style="margin-top: 12px;"></div>
            </div>
            <div class="stat-card">
                <h3 style="margin-bottom: 16px;">Download Payroll Summary (CSV)</h3>
                <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: 12px;">Export monthly payroll breakdown for all employees</p>
                <button class="btn btn-primary" id="downloadPayrollCSV" style="width: 100%;">Download CSV</button>
            </div>
            <div class="stat-card">
                <h3 style="margin-bottom: 16px;">Download Employee Master (CSV)</h3>
                <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: 12px;">Export complete employee database</p>
                <button class="btn btn-primary" id="downloadEmployeeMasterCSV" style="width: 100%;">Download CSV</button>
            </div>
            <div class="stat-card">
                <h3 style="margin-bottom: 16px;">Download Salary History (CSV)</h3>
                <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: 12px;">Export all salary change records</p>
                <button class="btn btn-primary" id="downloadSalaryHistoryCSV" style="width: 100%;">Download CSV</button>
            </div>
            <div class="stat-card">
                <h3 style="margin-bottom: 16px;">Download Daily Labor (CSV)</h3>
                <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: 12px;">Export daily wage laborer records for selected month</p>
                <button class="btn btn-primary" id="downloadDailyLaborCSV" style="width: 100%;">Download CSV</button>
            </div>
            <div class="stat-card" style="grid-column: span 2;">
                <h3 style="margin-bottom: 16px;">Download Full Backup (JSON)</h3>
                <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: 12px;">Complete backup of all employees, attendance, payroll, and daily labor data. Use this for disaster recovery or migration.</p>
                <button class="btn btn-primary" id="downloadFullBackup" style="width: 100%; max-width: 400px;">Download Full Backup (JSON)</button>
            </div>
            <div class="stat-card" style="grid-column: span 2;">
                <h3 style="margin-bottom: 16px;">Restore from Backup (Import)</h3>
                <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: 12px;">Upload a previously exported JSON backup file to restore all data. Warning: This will overwrite all current data!</p>
                <input type="file" id="restoreBackupFile" accept="application/json" class="form-control" style="margin-bottom: 12px; max-width: 400px;">
                <button class="btn btn-primary" id="restoreBackupBtn" style="width: 100%; max-width: 400px;">Import &amp; Restore Backup</button>
            </div>
        </div>
    </div>

    <!-- Attendance Modal -->
    <div id="attendanceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Attendance Entry</h2>
                <button class="close-btn" onclick="closeAttendanceModal()">&times;</button>
            </div>
            <form id="attendanceForm">
                <div class="form-group">
                    <label class="form-label" for="entryDate">Date</label>
                    <input type="date" id="entryDate" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="entryEmployee">Employee</label>
                    <select id="entryEmployee" class="form-control" required>
                        <option value="">Select Employee</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="entryStartTime">Start Time</label>
                        <input type="time" id="entryStartTime" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="entryEndTime">End Time</label>
                        <input type="time" id="entryEndTime" class="form-control" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="entryStatus">Status</label>
                    <select id="entryStatus" class="form-control" required>
                        <option value="Present">Present</option>
                        <option value="Absent">Absent</option>
                        <option value="Leave">Leave</option>
                        <option value="Half-day">Half-day</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Computed Values</label>
                    <div class="info-text">
                        Break Duration: <span class="computed-value" id="computedBreak">30 mins</span><br>
                        Net Hours: <span class="computed-value" id="computedNetHours">0</span><br>
                        Expected Hours: <span class="computed-value" id="computedExpectedHours">0</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="entryNotes">Notes (Optional)</label>
                    <textarea id="entryNotes" class="form-control" rows="3"></textarea>
                </div>
                
                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">Save Entry</button>
                    <button type="button" class="btn btn-secondary" onclick="closeAttendanceModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Attendance Modal -->
    <div id="editAttendanceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Attendance Entry</h2>
                <button class="close-btn" onclick="closeEditModal()">&times;</button>
            </div>
            <form id="editAttendanceForm">
                <input type="hidden" id="editEntryId">
                <div class="form-group">
                    <label class="form-label" for="editEntryDate">Date</label>
                    <input type="date" id="editEntryDate" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="editEntryEmployee">Employee</label>
                    <select id="editEntryEmployee" class="form-control" required>
                        <option value="">Select Employee</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="editEntryStartTime">Start Time</label>
                        <input type="time" id="editEntryStartTime" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="editEntryEndTime">End Time</label>
                        <input type="time" id="editEntryEndTime" class="form-control" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="editEntryStatus">Status</label>
                    <select id="editEntryStatus" class="form-control" required>
                        <option value="Present">Present</option>
                        <option value="Absent">Absent</option>
                        <option value="Leave">Leave</option>
                        <option value="Half-day">Half-day</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Computed Values</label>
                    <div class="info-text">
                        Break Duration: <span class="computed-value" id="editComputedBreak">30 mins</span><br>
                        Net Hours: <span class="computed-value" id="editComputedNetHours">0</span><br>
                        Expected Hours: <span class="computed-value" id="editComputedExpectedHours">0</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="editEntryNotes">Notes (Optional)</label>
                    <textarea id="editEntryNotes" class="form-control" rows="3"></textarea>
                </div>
                
                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Dialog -->
    <div id="deleteConfirmModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Confirm Delete</h2>
                <button class="close-btn" onclick="closeDeleteModal()">&times;</button>
            </div>
            <div style="margin-bottom: var(--space-24);">
                <p id="deleteConfirmMessage" style="color: var(--color-text); margin-bottom: var(--space-16);"></p>
                <p style="color: var(--color-error); font-weight: var(--font-weight-medium); font-size: var(--font-size-sm);">This action cannot be undone.</p>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" style="background: var(--color-error);" onclick="confirmDelete()">Delete Entry</button>
                <button class="btn btn-secondary" onclick="closeDeleteModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Edit Salary Modal -->
    <div id="editSalaryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Employee Salary</h2>
                <button class="close-btn" onclick="closeEditSalaryModal()">&times;</button>
            </div>
            <form id="editSalaryForm">
                <input type="hidden" id="salaryEmployeeId">
                <div class="form-group">
                    <label class="form-label">Employee Name</label>
                    <div class="form-control" id="salaryEmployeeName" style="background: var(--color-secondary); cursor: not-allowed;"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">Current Salary</label>
                    <div class="form-control" id="salaryCurrentAmount" style="background: var(--color-secondary); cursor: not-allowed;"></div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="salaryNewAmount">New Salary (₹) *</label>
                    <input type="number" id="salaryNewAmount" class="form-control" min="0" step="1000" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="salaryEffectiveDate">Effective Date *</label>
                    <input type="date" id="salaryEffectiveDate" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="salaryReason">Reason for Change (Optional)</label>
                    <select id="salaryReason" class="form-control">
                        <option value="">Select reason</option>
                        <option value="Increment">Increment</option>
                        <option value="Decrement">Decrement</option>
                        <option value="Adjustment">Adjustment</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">Update Salary</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditSalaryModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Salary History Modal -->
    <div id="salaryHistoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Salary History</h2>
                <button class="close-btn" onclick="closeSalaryHistoryModal()">&times;</button>
            </div>
            <div id="salaryHistoryContent"></div>
        </div>
    </div>

    <!-- Add Employee Modal -->
    <div id="addEmployeeModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2>Add New Employee</h2>
                <button class="close-btn" onclick="closeAddEmployeeModal()">&times;</button>
            </div>
            <form id="addEmployeeForm">
                <div class="form-group">
                    <label class="form-label" for="newEmpName">Full Name *</label>
                    <input type="text" id="newEmpName" class="form-control" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="newEmpRole">Role *</label>
                        <select id="newEmpRole" class="form-control" required>
                            <option value="">Select Role</option>
                            <option value="Carpenter">Carpenter</option>
                            <option value="Polisher">Polisher</option>
                            <option value="Admin/Owner">Admin/Owner</option>
                            <option value="Daily Labour">Daily Labour</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="newEmpSalary">Monthly Salary (₹) *</label>
                        <input type="number" id="newEmpSalary" class="form-control" min="0" step="1000" value="25000" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="newEmpHireDate">Hire Date *</label>
                        <input type="date" id="newEmpHireDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="newEmpPhone">Phone Number</label>
                        <input type="text" id="newEmpPhone" class="form-control" placeholder="98765-43210">
                    </div>
                </div>
                <h3 style="font-size: var(--font-size-lg); margin: var(--space-20) 0 var(--space-16) 0;">Work Schedule</h3>
                <div id="scheduleInputs"></div>
                <div class="action-buttons" style="margin-top: var(--space-24);">
                    <button type="submit" class="btn btn-primary">Add Employee</button>
                    <button type="button" class="btn btn-secondary" onclick="closeAddEmployeeModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Remove Employee Confirmation Modal -->
    <div id="removeEmployeeModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Deactivate Employee</h2>
                <button class="close-btn" onclick="closeRemoveEmployeeModal()">&times;</button>
            </div>
            <div style="margin-bottom: var(--space-24);">
                <p id="removeEmployeeMessage" style="color: var(--color-text); margin-bottom: var(--space-16);"></p>
                <p style="color: var(--color-warning); font-weight: var(--font-weight-medium); font-size: var(--font-size-sm);">The employee will be marked as Inactive. They will no longer appear in new attendance logs, but their historical data will be preserved.</p>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" style="background: var(--color-error);" onclick="confirmRemoveEmployee()">Deactivate Employee</button>
                <button class="btn btn-secondary" onclick="closeRemoveEmployeeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Advance Modal -->
    <div id="addAdvanceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Employee Advance</h2>
                <button class="close-btn" onclick="closeAddAdvanceModal()">&times;</button>
            </div>
            <form id="addAdvanceForm">
                <div class="form-group">
                    <label class="form-label" for="advanceEmployee">Employee *</label>
                    <select id="advanceEmployee" class="form-control" required>
                        <option value="">Select Employee</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="advanceAmount">Advance Amount (₹) *</label>
                        <input type="number" id="advanceAmount" class="form-control" min="100" step="100" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="advanceDate">Date of Advance *</label>
                        <input type="date" id="advanceDate" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="advanceReason">Reason</label>
                    <select id="advanceReason" class="form-control">
                        <option value="Personal">Personal</option>
                        <option value="Emergency">Emergency</option>
                        <option value="Purchase">Purchase</option>
                        <option value="Medical">Medical</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="advanceNotes">Notes (Optional)</label>
                    <textarea id="advanceNotes" class="form-control" rows="2"></textarea>
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">Save Advance</button>
                    <button type="button" class="btn btn-secondary" onclick="closeAddAdvanceModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Advance Modal -->
    <div id="editAdvanceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Advance</h2>
                <button class="close-btn" onclick="closeEditAdvanceModal()">&times;</button>
            </div>
            <form id="editAdvanceForm">
                <input type="hidden" id="editAdvanceId">
                <div class="form-group">
                    <label class="form-label" for="editAdvanceEmployee">Employee *</label>
                    <select id="editAdvanceEmployee" class="form-control" required>
                        <option value="">Select Employee</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="editAdvanceAmount">Advance Amount (₹) *</label>
                        <input type="number" id="editAdvanceAmount" class="form-control" min="100" step="100" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="editAdvanceDate">Date of Advance *</label>
                        <input type="date" id="editAdvanceDate" class="form-control" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="editAdvanceReason">Reason</label>
                        <select id="editAdvanceReason" class="form-control">
                            <option value="Personal">Personal</option>
                            <option value="Emergency">Emergency</option>
                            <option value="Purchase">Purchase</option>
                            <option value="Medical">Medical</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="editAdvanceStatus">Status *</label>
                        <select id="editAdvanceStatus" class="form-control" required>
                            <option value="Pending">Pending</option>
                            <option value="Partial">Partial</option>
                            <option value="Settled">Settled</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="editAdvanceDeducted">Amount Deducted So Far (₹)</label>
                    <input type="number" id="editAdvanceDeducted" class="form-control" min="0" step="100">
                </div>
                <div class="form-group">
                    <label class="form-label" for="editAdvanceNotes">Notes (Optional)</label>
                    <textarea id="editAdvanceNotes" class="form-control" rows="2"></textarea>
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditAdvanceModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Advance Confirmation -->
    <div id="deleteAdvanceModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Confirm Delete</h2>
                <button class="close-btn" onclick="closeDeleteAdvanceModal()">&times;</button>
            </div>
            <div style="margin-bottom: var(--space-24);">
                <p id="deleteAdvanceMessage" style="color: var(--color-text); margin-bottom: var(--space-16);"></p>
                <p style="color: var(--color-error); font-weight: var(--font-weight-medium); font-size: var(--font-size-sm);">This action cannot be undone.</p>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" style="background: var(--color-error);" onclick="confirmDeleteAdvance()">Delete Advance</button>
                <button class="btn btn-secondary" onclick="closeDeleteAdvanceModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="successToast" class="toast"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>

    <!-- Firebase Setup Modal -->
    <div id="firebaseSetupModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>Firebase Configuration</h2>
                <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-top: var(--space-8);">Configure Firebase to enable data persistence and sharing</div>
            </div>
            <form id="firebaseConfigForm">
                <div class="form-group">
                    <label class="form-label" for="firebaseApiKey">API Key *</label>
                    <input type="text" id="firebaseApiKey" class="form-control" required placeholder="AIzaSyC...">
                </div>
                <div class="form-group">
                    <label class="form-label" for="firebaseAuthDomain">Auth Domain *</label>
                    <input type="text" id="firebaseAuthDomain" class="form-control" required placeholder="your-project.firebaseapp.com">
                </div>
                <div class="form-group">
                    <label class="form-label" for="firebaseDbUrl">Database URL *</label>
                    <input type="text" id="firebaseDbUrl" class="form-control" required placeholder="https://your-project-default-rtdb.firebaseio.com/">
                </div>
                <div class="form-group">
                    <label class="form-label" for="firebaseProjectId">Project ID *</label>
                    <input type="text" id="firebaseProjectId" class="form-control" required placeholder="your-project-id">
                </div>
                <div style="background: var(--color-bg-3); padding: var(--space-16); border-radius: var(--radius-base); margin: var(--space-16) 0; font-size: var(--font-size-sm);">
                    <strong>Note:</strong> This data will be stored in memory for the current session. You'll need to re-enter this configuration when you refresh the page.
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">Connect to Firebase</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
