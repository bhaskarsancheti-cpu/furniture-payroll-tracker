<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance & Payroll Tracker - Furniture Workshop</title>
    <style>
        :root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);\
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);

  --color-primary-light: rgba(216, 219, 212, 1);
  --color-primary: var(--color-brown-600);
  --color-primary-dark: var(--color-charcoal-700);
  --color-secondary: var(--color-slate-500);

  --color-success: rgba(40, 167, 69, 1);
  --color-warning: rgba(255, 193, 7, 1);
  --color-error: rgba(220, 53, 69, 1);
  --color-info: rgba(23, 162, 184, 1);

  /* Semantic Color Tokens */
  --color-bg-primary: var(--color-cream-100);
  --color-bg-secondary: var(--color-cream-50);
  --color-bg-tertiary: var(--color-gray-200);
  --color-text: var(--color-charcoal-700);
  --color-text-light: var(--color-slate-500);
  --color-border: var(--color-gray-200);
  --color-shadow: rgba(0, 0, 0, 0.1);

  /* Typography */
  --font-family-primary: 'Inter', sans-serif;
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
  --font-size-2xl: 1.5rem;
  --font-size-3xl: 1.875rem;
  --font-size-4xl: 2.25rem;
  --font-weight-light: 300;
  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  /* Spacing */
  --space-4: 0.25rem;
  --space-8: 0.5rem;
  --space-12: 0.75rem;
  --space-16: 1rem;
  --space-20: 1.25rem;
  --space-24: 1.5rem;
  --space-32: 2rem;
  --space-40: 2.5rem;

  /* Border Radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
}

/* Global Styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px;
  background-color: var(--color-bg-tertiary);
}

body {
  font-family: var(--font-family-primary);
  color: var(--color-text);
  line-height: 1.6;
  background-color: var(--color-bg-primary);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Container */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--space-32);
  flex-grow: 1;
}

/* Header */
.header {
  background-color: var(--color-primary-dark);
  color: var(--color-white);
  padding: var(--space-16) 0;
  box-shadow: 0 2px 4px var(--color-shadow);
}

.header .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-16) var(--space-32);
}

.header h1 {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary-light);
}

.user-info {
    font-size: var(--font-size-sm);
    color: var(--color-primary-light);
    text-align: right;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
}

/* Tabs */
.tabs {
  display: flex;
  justify-content: flex-start;
  margin-bottom: var(--space-32);
  border-bottom: 2px solid var(--color-border);
  padding: 0 var(--space-32);
  background-color: var(--color-white);
  box-shadow: 0 1px 3px var(--color-shadow);
}

.tab-button {
  background: none;
  border: none;
  padding: var(--space-12) var(--space-20);
  cursor: pointer;
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-medium);
  color: var(--color-slate-500);
  transition: all 0.2s ease-in-out;
  border-bottom: 3px solid transparent;
  margin-bottom: -2px; /* Pulls button slightly down to align border */
}

.tab-button:hover {
  color: var(--color-primary);
}

.tab-button.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
  font-weight: var(--font-weight-semibold);
}

.tab-content {
  display: none;
  padding: var(--space-24) var(--space-32);
  background-color: var(--color-white);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 10px var(--color-shadow);
}

.tab-content.active {
  display: block;
}

/* Utility Classes */
.flex-row {
    display: flex;
    align-items: center;
    gap: var(--space-16);
    margin-bottom: var(--space-24);
}

.text-center { text-align: center; }
.text-right { text-align: right; }
.font-bold { font-weight: var(--font-weight-bold); }
.text-primary { color: var(--color-primary); }

/* Form Styles */
.form-group {
  margin-bottom: var(--space-20);
}

label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
  color: var(--color-text);
}

input[type="text"],
input[type="number"],
input[type="date"],
input[type="time"],
select,
textarea {
  width: 100%;
  padding: var(--space-12);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-base);
  color: var(--color-text);
  background-color: var(--color-cream-50);
  transition: border-color 0.2s;
}

input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: var(--color-primary);
}

.form-row {
    display: flex;
    gap: var(--space-20);
}

.form-col {
    flex: 1;
}

.action-buttons {
    display: flex;
    justify-content: flex-end;
    gap: var(--space-12);
    margin-top: var(--space-20);
}

/* Button Styles */
.btn {
  padding: var(--space-12) var(--space-20);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  transition: background-color 0.2s, transform 0.1s;
  box-shadow: 0 2px 5px var(--color-shadow);
}

.btn-primary {
  background-color: var(--color-primary);
  color: var(--color-white);
}

.btn-primary:hover {
  background-color: var(--color-brown-600);
  transform: translateY(-1px);
}

.btn-secondary {
  background-color: var(--color-gray-200);
  color: var(--color-text);
}

.btn-secondary:hover {
  background-color: var(--color-gray-300);
  transform: translateY(-1px);
}

.btn-icon {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--color-slate-500);
    padding: var(--space-8);
    border-radius: var(--radius-sm);
    transition: color 0.2s, background-color 0.2s;
}

.btn-icon:hover {
    color: var(--color-primary);
    background-color: var(--color-gray-200);
}

.btn-icon.edit-icon { color: var(--color-info); }
.btn-icon.delete-icon { color: var(--color-error); }

/* Table Styles */
.table-container {
    overflow-x: auto;
    margin-top: var(--space-20);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
}

.data-table {
  width: 100%;
  border-collapse: collapse;
  font-size: var(--font-size-base);
}

.data-table th, .data-table td {
  padding: var(--space-12);
  text-align: left;
  border-bottom: 1px solid var(--color-border);
}

.data-table th {
  background-color: var(--color-bg-tertiary);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary-dark);
  text-transform: uppercase;
  font-size: var(--font-size-sm);
  letter-spacing: 0.5px;
}

.data-table tr:hover {
  background-color: var(--color-cream-50);
}

/* Card/Panel Styles */
.panel {
    background-color: var(--color-bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space-24);
    box-shadow: 0 2px 8px var(--color-shadow);
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-20);
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--space-8);
}

.section-header h3 {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-primary-dark);
}

/* Modals */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.4);
    justify-content: center;
    align-items: center;
}

.modal-content {
    background-color: var(--color-white);
    padding: var(--space-24);
    border-radius: var(--radius-xl);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    width: 90%;
    max-width: 800px;
    position: relative;
    animation: fadeIn 0.3s ease-out;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--space-16);
    margin-bottom: var(--space-20);
}

.modal-header h2 {
    font-size: var(--font-size-2xl);
    color: var(--color-primary);
}

.close-btn {
    color: var(--color-gray-400);
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-light);
    cursor: pointer;
    background: none;
    border: none;
    padding: 0;
    line-height: 1;
}

.close-btn:hover {
    color: var(--color-charcoal-700);
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Schedule Grid for Employee Modal */
.schedule-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-16);
}

.schedule-row {
    display: flex;
    gap: var(--space-8);
    align-items: center;
}

.schedule-row input[type="time"],
.schedule-row select {
    flex: 1;
}

/* Toast Notification */
.toast {
    visibility: hidden;
    min-width: 250px;
    margin-left: -125px;
    background-color: var(--color-primary-dark);
    color: var(--color-white);
    text-align: center;
    border-radius: var(--radius-md);
    padding: var(--space-16);
    position: fixed;
    z-index: 1001;
    left: 50%;
    bottom: var(--space-32);
    font-size: var(--font-size-base);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.toast.show {
    visibility: visible;
    animation: slideIn 0.5s, fadeOut 0.5s 2.5s;
}

@keyframes slideIn {
    from { bottom: 0; opacity: 0; }
    to { bottom: var(--space-32); opacity: 1; }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .container {
        padding: var(--space-24) var(--space-16);
    }
    .header .container {
        flex-direction: column;
        align-items: flex-start;
        padding: var(--space-16);
    }
    .user-info {
        margin-top: var(--space-8);
        align-items: flex-start;
    }
    .tabs {
        overflow-x: auto;
        justify-content: flex-start;
        padding: 0;
    }
    .tab-button {
        flex-shrink: 0;
        font-size: var(--font-size-base);
        padding: var(--space-12);
    }
    .tab-content {
        padding: var(--space-16);
    }
    .form-row {
        flex-direction: column;
        gap: 0;
    }
    .schedule-grid {
        grid-template-columns: 1fr;
    }
    .modal-content {
        max-width: 95%;
        margin: var(--space-20);
    }
    .action-buttons {
        flex-direction: column-reverse;
        gap: var(--space-8);
    }
    .action-buttons .btn {
        width: 100%;
        text-align: center;
    }
}
    </style>
    <!-- Include Inter font for a professional look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <header class="header">
        <div class="container">
            <h1>Furniture Workshop Payroll</h1>
            <div class="user-info">
                <p>App ID: <span id="displayAppId">...</span></p>
                <p>User ID: <span id="displayUserId">...</span></p>
            </div>
        </div>
    </header>

    <div class="tabs">
        <button class="tab-button active" onclick="switchTab('employees')">Employees</button>
        <button class="tab-button" onclick="switchTab('attendance')">Attendance</button>
        <button class="tab-button" onclick="switchTab('labor')">Daily Labor</button>
        <button class="tab-button" onclick="switchTab('advances')">Advances</button>
        <button class="tab-button" onclick="switchTab('payroll')">Payroll</button>
        <button class="tab-button" onclick="switchTab('settings')">Settings & Backup</button>
    </div>

    <main class="container">
        
        <!-- Employees Tab -->
        <div id="employees" class="tab-content active panel">
            <div class="section-header">
                <h3>Employee Management</h3>
                <button class="btn btn-primary" onclick="openAddEmployeeModal()">+ Add New Employee</button>
            </div>
            <div class="table-container">
                <table class="data-table" id="employeesTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Role</th>
                            <th>Monthly Salary</th>
                            <th>Hire Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Employee rows will be inserted here by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Attendance Tab -->
        <div id="attendance" class="tab-content panel">
            <div class="section-header">
                <h3>Attendance Tracking</h3>
                <button class="btn btn-primary" onclick="openAttendanceModal()">+ Record Attendance</button>
            </div>
            
            <div class="flex-row" style="gap: var(--space-8);">
                <label for="attendanceMonthSelector" style="margin-bottom: 0;">Month:</label>
                <input type="month" id="attendanceMonthSelector" value="" style="max-width: 150px; flex-grow: 0;">
                <label for="attendanceEmployeeSelector" style="margin-bottom: 0;">Employee:</label>
                <select id="attendanceEmployeeSelector" style="max-width: 200px; flex-grow: 0;">
                    <!-- Options populated by JS -->
                </select>
                <button class="btn btn-secondary" onclick="exportAttendanceCSV()">Download CSV</button>
            </div>

            <div class="table-container">
                <table class="data-table" id="attendanceTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Employee</th>
                            <th>Status</th>
                            <th>Check-In</th>
                            <th>Check-Out</th>
                            <th>Net Hours</th>
                            <th>Notes</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Attendance rows will be inserted here by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Daily Labor Tab -->
        <div id="labor" class="tab-content panel">
            <div class="section-header">
                <h3>Daily Labor/Job Tracking</h3>
                <button class="btn btn-primary" onclick="openAddDailyLaborModal()">+ Add Daily Labor</button>
            </div>
            
            <div class="flex-row" style="gap: var(--space-8);">
                <label for="laborDateSelector" style="margin-bottom: 0;">Date:</label>
                <input type="date" id="laborDateSelector" value="" style="max-width: 150px; flex-grow: 0;">
                <button class="btn btn-secondary" id="downloadDailyLaborCSV">Download CSV (Daily)</button>
            </div>

            <div class="table-container">
                <table class="data-table" id="dailyLaborTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Employee</th>
                            <th>Job/Task</th>
                            <th>Hours</th>
                            <th>Rate</th>
                            <th>Total Cost</th>
                            <th>Notes</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Labor rows will be inserted here by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Advances Tab -->
        <div id="advances" class="tab-content panel">
            <div class="section-header">
                <h3>Employee Advances (Loans)</h3>
                <button class="btn btn-primary" onclick="openAddAdvanceModal()">+ Record New Advance</button>
            </div>

            <div class="table-container">
                <table class="data-table" id="advancesTable">
                    <thead>
                        <tr>
                            <th>Employee</th>
                            <th>Date Given</th>
                            <th>Amount</th>
                            <th>Reason</th>
                            <th>Status</th>
                            <th>Deducted</th>
                            <th>Notes</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Advance rows will be inserted here by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Payroll Tab -->
        <div id="payroll" class="tab-content panel">
            <div class="section-header">
                <h3>Payroll Generation</h3>
            </div>
            
            <div class="flex-row" style="gap: var(--space-8);">
                <label for="payrollMonthSelector" style="margin-bottom: 0;">Month:</label>
                <input type="month" id="payrollMonthSelector" value="" style="max-width: 150px; flex-grow: 0;">
                <button class="btn btn-primary" onclick="generatePayroll()">Generate Payroll Report</button>
                <button class="btn btn-secondary" onclick="exportPayrollCSV()">Download CSV (Monthly)</button>
            </div>

            <div id="payrollReportContainer">
                <div class="table-container">
                    <table class="data-table" id="payrollTable">
                        <thead>
                            <tr>
                                <th>Employee</th>
                                <th>Role</th>
                                <th>Monthly Salary</th>
                                <th>Working Days</th>
                                <th>Total Days/Hours</th>
                                <th>Total Salary Due</th>
                                <th>Total Advances</th>
                                <th>Net Pay</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Payroll rows will be inserted here by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Settings & Backup Tab -->
        <div id="settings" class="tab-content panel">
            <div class="section-header">
                <h3>Settings and Data Management</h3>
            </div>

            <!-- Global Settings -->
            <div class="panel" style="margin-bottom: var(--space-24);">
                <h4 style="font-size: var(--font-size-lg); margin-bottom: var(--space-16); color: var(--color-primary);">Global Settings</h4>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="shopName">Shop Name</label>
                            <input type="text" id="shopName" placeholder="e.g., The Woodwork Studio">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="defaultCurrency">Default Currency Symbol</label>
                            <input type="text" id="defaultCurrency" placeholder="e.g., â‚¹ or $">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="defaultWorkHours">Default Expected Daily Work Hours (for attendance calculation)</label>
                    <input type="number" id="defaultWorkHours" min="1" max="15" value="10">
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
                </div>
            </div>

            <!-- Data Backup -->
            <div class="panel">
                <h4 style="font-size: var(--font-size-lg); margin-bottom: var(--space-16); color: var(--color-primary);">Data Backup & Restore</h4>
                <p style="margin-bottom: var(--space-16); font-size: var(--font-size-sm); color: var(--color-text-light);">
                    You can download a full backup of all your data or restore from a previously saved backup file.
                </p>
                <div class="form-row">
                    <div class="form-col">
                        <button class="btn btn-primary" id="downloadFullBackup" style="width: 100%;">Download Full Backup (JSON)</button>
                    </div>
                    <div class="form-col">
                        <input type="file" id="backupFileInput" accept=".json" style="padding: 0; border: none; background: none;">
                        <button class="btn btn-secondary" id="restoreBackupBtn" style="width: 100%; margin-top: var(--space-8);">Restore Data from Backup</button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Modal for Employee (Add/Edit) -->
    <div id="addEditEmployeeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="employeeModalTitle">Add New Employee</h2>
                <button class="close-btn" onclick="closeEditEmployeeModal()">&times;</button>
            </div>
            <form id="employeeForm">
                <input type="hidden" id="employeeId">
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="employeeName">Full Name</label>
                            <input type="text" id="employeeName" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="employeeRole">Role/Designation</label>
                            <input type="text" id="employeeRole" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="employeeMonthlySalary">Monthly Salary (0 for Daily Labor)</label>
                            <input type="number" id="employeeMonthlySalary" min="0" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="employeeHireDate">Hire Date</label>
                            <input type="date" id="employeeHireDate" required>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="employeePhone">Phone Number</label>
                            <input type="text" id="employeePhone" placeholder="Optional">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="employeeStatus">Status</label>
                            <select id="employeeStatus" required>
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <h4 style="margin-top: var(--space-20); margin-bottom: var(--space-16); font-size: var(--font-size-lg); color: var(--color-secondary);">Default Schedule (Weekly)</h4>
                <p style="font-size: var(--font-size-sm); color: var(--color-text-light); margin-bottom: var(--space-16);">Use 'Off' for non-working days. Net hours are calculated automatically.</p>
                <div class="schedule-grid" id="scheduleGrid">
                    <!-- Schedule rows will be inserted here by JS -->
                </div>

                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">Save Employee</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditEmployeeModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Attendance (Record/Edit) -->
    <div id="attendanceModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 id="attendanceModalTitle">Record Attendance</h2>
                <button class="close-btn" onclick="closeAttendanceModal()">&times;</button>
            </div>
            <form id="attendanceForm">
                <input type="hidden" id="attendanceRecordId">
                <div class="form-group">
                    <label for="attendanceEmployee">Employee</label>
                    <select id="attendanceEmployee" required>
                        <!-- Options populated by JS -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="attendanceDate">Date</label>
                    <input type="date" id="attendanceDate" required>
                </div>
                <div class="form-group">
                    <label for="attendanceStatus">Status</label>
                    <select id="attendanceStatus" required>
                        <option value="Present">Present</option>
                        <option value="Absent">Absent</option>
                        <option value="Half Day">Half Day</option>
                        <option value="Paid Leave">Paid Leave</option>
                    </select>
                </div>
                <div id="timeInputs" class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="attendanceCheckIn">Check-In Time</label>
                            <input type="time" id="attendanceCheckIn">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="attendanceCheckOut">Check-Out Time</label>
                            <input type="time" id="attendanceCheckOut">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="attendanceNotes">Notes</label>
                    <textarea id="attendanceNotes" rows="3" placeholder="e.g., Reason for absence, specific job done..."></textarea>
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">Save Attendance</button>
                    <button type="button" class="btn btn-secondary" onclick="closeAttendanceModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Daily Labor (Add/Edit) -->
    <div id="dailyLaborModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 id="dailyLaborModalTitle">Record Daily Labor</h2>
                <button class="close-btn" onclick="closeDailyLaborModal()">&times;</button>
            </div>
            <form id="dailyLaborForm">
                <input type="hidden" id="dailyLaborId">
                <div class="form-group">
                    <label for="dailyLaborEmployee">Employee (Daily Wage)</label>
                    <select id="dailyLaborEmployee" required>
                        <!-- Options populated by JS -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="dailyLaborDate">Date</label>
                    <input type="date" id="dailyLaborDate" required>
                </div>
                <div class="form-group">
                    <label for="dailyLaborTask">Job/Task Description</label>
                    <input type="text" id="dailyLaborTask" required placeholder="e.g., Assembling cabinet doors">
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="dailyLaborHours">Hours Worked</label>
                            <input type="number" id="dailyLaborHours" min="0" step="0.5" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="dailyLaborRate">Hourly Rate (per employee)</label>
                            <input type="number" id="dailyLaborRate" min="0" step="1" required>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="dailyLaborNotes">Notes (Optional)</label>
                    <textarea id="dailyLaborNotes" rows="2"></textarea>
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">Save Labor Record</button>
                    <button type="button" class="btn btn-secondary" onclick="closeDailyLaborModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Advance (Add/Edit) -->
    <div id="addEditAdvanceModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 id="advanceModalTitle">Record New Advance</h2>
                <button class="close-btn" onclick="closeEditAdvanceModal()">&times;</button>
            </div>
            <form id="advanceForm">
                <input type="hidden" id="advanceId">
                <div class="form-group">
                    <label for="advanceEmployee">Employee</label>
                    <select id="advanceEmployee" required>
                        <!-- Options populated by JS -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="advanceDate">Date Given</label>
                    <input type="date" id="advanceDate" required>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="advanceAmount">Amount</label>
                            <input type="number" id="advanceAmount" min="1" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="advanceStatus">Status</label>
                            <select id="advanceStatus" required onchange="toggleAdvanceDeductionInput(this.value)">
                                <option value="Pending">Pending</option>
                                <option value="Deducted">Deducted</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group" id="deductionAmountGroup" style="display: none;">
                    <label for="advanceAmountDeducted">Amount Deducted This Month</label>
                    <input type="number" id="advanceAmountDeducted" min="0" step="1">
                </div>
                <div class="form-group">
                    <label for="advanceReason">Reason for Advance</label>
                    <input type="text" id="advanceReason" required>
                </div>
                <div class="form-group">
                    <label for="advanceNotes">Notes (Optional)</label>
                    <textarea id="advanceNotes" rows="2"></textarea>
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditAdvanceModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Delete Employee Confirmation (New Modal) -->
    <div id="deleteEmployeeModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Confirm Employee Deletion</h2>
                <button class="close-btn" onclick="closeDeleteEmployeeModal()">&times;</button>
            </div>
            <div style="margin-bottom: var(--space-24);">
                <p id="deleteEmployeeMessage" style="color: var(--color-text); margin-bottom: var(--space-16);"></p>
                <p style="color: var(--color-error); font-weight: var(--font-weight-medium); font-size: var(--font-size-sm);">This action will permanently remove the employee and cannot be undone.</p>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" style="background: var(--color-error);" onclick="confirmDeleteEmployee()">Delete Employee</button>
                <button class="btn btn-secondary" onclick="closeDeleteEmployeeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Delete Advance Confirmation -->
    <div id="deleteAdvanceModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Confirm Delete</h2>
                <button class="close-btn" onclick="closeDeleteAdvanceModal()">&times;</button>
            </div>
            <div style="margin-bottom: var(--space-24);">
                <p id="deleteAdvanceMessage" style="color: var(--color-text); margin-bottom: var(--space-16);"></p>
                <p style="color: var(--color-error); font-weight: var(--font-weight-medium); font-size: var(--font-size-sm);">This action cannot be undone.</p>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" style="background: var(--color-error);" onclick="confirmDeleteAdvance()">Delete Advance</button>
                <button class="btn btn-secondary" onclick="closeDeleteAdvanceModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Delete Attendance Confirmation -->
    <div id="deleteAttendanceModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Confirm Delete</h2>
                <button class="close-btn" onclick="closeDeleteAttendanceModal()">&times;</button>
            </div>
            <div style="margin-bottom: var(--space-24);">
                <p id="deleteAttendanceMessage" style="color: var(--color-text); margin-bottom: var(--space-16);"></p>
                <p style="color: var(--color-error); font-weight: var(--font-weight-medium); font-size: var(--font-size-sm);">This action cannot be undone.</p>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" style="background: var(--color-error);" onclick="confirmDeleteAttendance()">Delete Attendance</button>
                <button class="btn btn-secondary" onclick="closeDeleteAttendanceModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Delete Daily Labor Confirmation -->
    <div id="deleteDailyLaborModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Confirm Delete</h2>
                <button class="close-btn" onclick="closeDeleteDailyLaborModal()">&times;</button>
            </div>
            <div style="margin-bottom: var(--space-24);">
                <p id="deleteDailyLaborMessage" style="color: var(--color-text); margin-bottom: var(--space-16);"></p>
                <p style="color: var(--color-error); font-weight: var(--font-weight-medium); font-size: var(--font-size-sm);">This action cannot be undone.</p>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" style="background: var(--color-error);" onclick="confirmDeleteDailyLabor()">Delete Labor Record</button>
                <button class="btn btn-secondary" onclick="closeDeleteDailyLaborModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="successToast" class="toast"></div>

    <script src="app.js"></script>
</body>
</html>
